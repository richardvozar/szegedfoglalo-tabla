<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Game Page</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="../static/style.css">
    <link rel="stylesheet" href="../static/map.css">
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
      integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
      crossorigin="anonymous"
    ></script>
    <script >
        let socket=io();
        let selected;
        let selected_mapp=0;
        let lap=0;

        let forfeit=false;
        let lobby_name='{{ session['lobby_name'] }}'
        let lobby_id='{{ session['lobby_id'] }}'
        let host_name='{{ session['host_name'] }}'
        let host_name_id='{{ session['host_name_id'] }}'
        let host_point='{{ session['host_point'] }}'
        let opponent_name='{{ session['opponent_name'] }}'
        let opponent_name_id='{{ session['opponent_name_id'] }}'
        let opponent_point='{{ session['opponent_point'] }}'
        let player1_name='{{ session['player1_name'] }}'
        let player1_id='{{ session['player1_id'] }}'
        let player2_name='{{ session['player2_name'] }}'
        let player2_id='{{ session['player2_id'] }}'
        let player1_pt='{{ session['player1_pt'] }}'
        let player2_pt='{{ session['player2_pt'] }}'
        let host_color='{{ session['host_color'] }}'
        let opponent_color='{{ session['opponent_color'] }}'
        let host_side='{{ session['host_side'] }}'
        let opponent_side='{{ session['opponent_side'] }}'
        let player_side='{{ session['player_side'] }}'
        let host_imege='{{ session['host_imege'] }}'
        let opponent_image='{{ session['opponent_image'] }}'


        let university_area=['17']
        let host_area=['4']
        let opponent_area=['1']
        let free = []
        let question_type = 1;
        let ans_time=""
        let host_pic=''
        let opponent_pic=''
        let haboru_kerdes=0
        let battle = false;

        const countdownSound = new Audio('../static/countdown.wav');
        countdownSound.muted = true;

        const haboruSound = new Audio('../static/haboru.wav')
        haboruSound.muted = true;


        const neighbors = {
            "1": ["2", "3"],
            "2": ["1", "3", "15"],
            "3": ["1", "2", "14"],
            "4": ["9", "10"],
            "5": ["6", "13", "18"],
            "6": ["5", "16", "18"],
            "7": ["8", "11", "19"],
            "8": ["7", "19"],
            "9": ["4", "10", "12"],
            "10": ["4", "9", "11", "12"],
            "11": ["7", "10", "12", "17", "19"],
            "12": ["11", "10", "9", "13", "17", "18"],
            "13": ["5", "12", "18"],
            "14": ["15", "17", "19", "3"],
            "15": ["14", "2", "17", "18"],
            "16": ["6", "18"],
            "17": ["15", "14", "18", "19", "11", "12"],
            "18": ["12", "13", "15", "16", "17", "5", "6"],
            "19": ["17", "14", "11", "8", "7"]
        };

        const map_size = Object.keys(neighbors).length;

        let can_select=''
        let helper2=false;

        let lastclicked=opponent_name;

        let helper=[];

    socket.on('connect', function() {

      console.log('Connected to server');
      //disableCursor();
      applyBrightnessToAreas(university_area, 60);
      applyFillToAreas(opponent_area, opponent_color);
      applyFillToAreas(host_area, host_color);
      addMouseoverListeners(opponent_area, 85);
      addMouseoverListeners(host_area, 85);
      addMouseoutListeners(opponent_area, 100);
      addMouseoutListeners(host_area, 100);
      socket.emit("start_game",{"status":true,"lobby_id":lobby_id,"player":player1_name});
    });

    //TODO: Valaszthato/ures mezoknek hover es pointer cursor
    function disableCursor() {
        var areas = document.getElementsByClassName("testcases");
        for (var area = 0; area < areas.length; area++) {
            if (!opponent_area.includes(areas[area].id) && !host_area.includes(areas[area].id) && !university_area.includes(areas[area].id)) {
                //areas[area].style.cursor = "not-allowed";
                areas[area].style.filter = "brightness(85%)";
                free.push(areas[area].id);
                //console.log("uresek"+free)
            }
        }
    }

    function applyBrightnessToAreas(areas, brightness) {
      for(var i = 0; i < areas.length; i++){
        document.getElementById(areas[i]).style.filter = "brightness(" + brightness + "%)";
      }
    }

    function applyFillToAreas(areas, color) {
      for(var i = 0; i < areas.length; i++){
        document.getElementById(areas[i]).style.fill = color;
        document.getElementById(areas[i]).style.cursor = "not-allowed";
      }
    }

    function addMouseoverListeners(areas, brightness) {
      for(var i = 0; i < areas.length; i++){
        const gElement = document.getElementById(areas[i]);
        gElement.addEventListener("mouseover", () => {
          gElement.style.filter = "brightness(" + brightness + "%)";
          console.log('mouseover');
        });
      }
    }

    function addMouseoutListeners(areas, brightness) {
      for(var i = 0; i < areas.length; i++){
        const gElement = document.getElementById(areas[i]);
        gElement.addEventListener("mouseout", () => {
          gElement.style.filter = "brightness(" + brightness + "%)";
          console.log('mouseout');
        });
      }
    }

        socket.on("json", (data) => {
        
            if(data.data_type==='start_game'){
                console.log("start_game",data)
                if(player1_name===host_name) {

                    /*
                    * Host keri a kerdest 1 mp utan
                    * Gyönyörű ez a dupla setTimeout
                    */
                    setTimeout(function () {
                        setTimeout(function () {
                            socket.emit("get_question_event", {
                                lobby_id: lobby_id,
                                player: player1_name,
                                question_type: question_type,
                            })
                        }, 1000);
                    }, 2500);
                }
            }
            else if (data.data_type==='question'){
                //show_whos_round("")
                areaHighlightRemove();

                lobby_question=data.lobby_question
                question_type=data.question_type
                console.log("JSON question")
                document.getElementById("question").innerHTML = data.data_html

                startTimerOnQuestionDiv(9);

                setTimeout(function (){
                    if (data.question_type===1){
                        submitForm(lobby_question.Cor_answ);
                    }
                    else{
                        submitForm_type2(lobby_question.Cor_answ)
                    }


                },10000)
            }
            else if ((data.data_type==='point_refresh')){
                //show_whos_round("")
                areaHighlightRemove();
                console.log("JSON point_refresh")
                host_point=data.host_point;
                opponent_point=data.opponent_point
                /*
                document.getElementById("playerpt").innerHTML=host_point;
                document.getElementById("enemypt").innerHTML=opponent_point;
                */

                updatePoints(host_point, opponent_point);
                
            }
            else if ((data.data_type==='host_select_area')){
                console.log("JSON host_select_area")
                can_select=data.player
                console.log(can_select,'bir valasztani')
                //show_whos_round(can_select)

                areaHighlight(can_select, opponent_color);
            }
            else if ((data.data_type==='host_select_area_and_point_refresh')){
                console.log("JSON host_select_area_and_point_refresh",data)
                host_point=data.host_point;
                opponent_point=data.opponent_point
                /*
                document.getElementById("playerpt").innerHTML=host_point;
                document.getElementById("enemypt").innerHTML=opponent_point;
                */

                updatePoints(host_point, opponent_point);

                can_select=data.player
                console.log(can_select,'bir valasztani')
                //show_whos_round(can_select)
                areaHighlight(can_select, opponent_color);
            }
            else if (data.data_type==='collect_area_event'){
                //show_whos_round("")
                areaHighlightRemove();
                console.log("JSON collect_area_event")
                document.getElementById(data.button_id).style.fill=data.color;
                document.getElementById(data.button_id).style.cursor = "pointer";
                
                console.log("data = " + JSON.stringify(data))

                if (data.player === host_name) {
                    host_area.push(data.button_id)
                } else if (data.player === opponent_name) {
                    opponent_area.push(data.button_id)
                } else {
                    console.log("MIALÓFASZ")
                }
                /*
                 * itt kerunk uj kerdes miutan valaki valasztot cellat de ez csak akkor
                 * mukodik ha csak az egyik jatekos valaszolt jol
                 * */
                if(player1_name===host_name){

                    // ha már csak egyetlen szabad terület van
                    if (opponent_area.length + host_area.length == map_size - 2) {
                        question_type = 2;
                    }


                    if (host_area.length + opponent_area.length < map_size - 1) {
                        setTimeout(function (){
                            socket.emit("get_question_event",{
                                lobby_id: lobby_id,
                                player: player1_name,
                                question_type: question_type,
                            })
                        }, 1000)
                    } else {
                        if (battle===false){
                            socket.emit("start_battle",{
                                lobby_id: lobby_id,
                                player: player1_name,
                                battle_status:true})

                        }
                        if (haboru_kerdes<=5){
                            question_type = 2;
                            console.log('HABORU KERDES',haboru_kerdes)
                            haboru_kerdes++
                        }else{
                            socket.emit("get_score", {
                            lobby_id:lobby_id,
                            player:player1_name
                            });
                        }

                    }


                }
                //disableCursor();
                applyBrightnessToAreas(university_area, 60);
                applyFillToAreas(opponent_area, opponent_color);
                applyFillToAreas(host_area, host_color);
                addMouseoverListeners(opponent_area, 85);
                addMouseoverListeners(host_area, 85);
                addMouseoutListeners(opponent_area, 100);
                addMouseoutListeners(host_area, 100);
            }
            else if (data.data_type==='collect_area_event_for_new_select'){
                //show_whos_round("")
                areaHighlightRemove();
                console.log("JSON collect_area_event_for_new_select")
                document.getElementById(data.button_id).style.fill=data.color;
                document.getElementById(data.button_id).style.cursor = "pointer";



                console.log("data = " + JSON.stringify(data))

                if (data.host_player === host_name) {
                    host_area.push(data.button_id)
                } else if (data.host_player === opponent_name) {
                    opponent_area.push(data.button_id)
                } else {
                    console.log("MIALÓFASZ")
                }

                can_select=data.player
                helper2=false
                console.log(can_select,'bir valasztani')
                //show_whos_round(can_select)

                areaHighlight(can_select, opponent_color);

                //disableCursor();
                applyBrightnessToAreas(university_area, 60);
                applyFillToAreas(opponent_area, opponent_color);
                applyFillToAreas(host_area, host_color);
                addMouseoverListeners(opponent_area, 85);
                addMouseoverListeners(host_area, 85);
                addMouseoutListeners(opponent_area, 100);
                addMouseoutListeners(host_area, 100);
            }
            else if (data.data_type==='opponent_select_area'){
                console.log("JSON opponent_select_area")
                can_select=data.player
                console.log(can_select,'bir valasztani')
                //show_whos_round(can_select)

                // ??? WHY HOST_COLOR
                areaHighlight(can_select, host_color);
            }
            else if (data.data_type==='opponent_select_area_and_point_refresh'){
                console.log("JSON opponent_select_area_and_point_refresh",data)
                host_point=data.host_point;
                opponent_point=data.opponent_point
                /*
                document.getElementById("playerpt").innerHTML=host_point;
                document.getElementById("enemypt").innerHTML=opponent_point;
                */

                updatePoints(host_point, opponent_point);

                can_select=data.player
                console.log(can_select,'bir valasztani')
                //show_whos_round(can_select)
                areaHighlight(can_select, host_color);
            }
            else if (data.data_type ==='host_and_opponent_select_area'){
                console.log("JSON host_and_opponent_select_area")
                can_select=data.player
                helper2=true
                console.log(can_select,'bir valasztani')
                //show_whos_round(can_select)

                if(can_select===host_name)
                    areaHighlight(can_select, host_color);

            }
            else if (data.data_type ==='get_score') {
                //show_whos_round("")
                areaHighlightRemove();
                request_score();
            }
            else if (data.data_type ==='surrender') {
                host_point=data.host_point;
                opponent_point=data.opponent_point
                /*
                document.getElementById("playerpt").innerHTML=host_point;
                document.getElementById("enemypt").innerHTML=opponent_point;
                */

                updatePoints(host_point, opponent_point);

                clear_question_div();
                request_score();
            }else if (data.data_type ==='start_battle') {
                battle = data.battle_status;
                setGamePhaseImg();
                playHaboruSoundEffect();
                if(player1_name===host_name){
                    haboru_kerdes++
                    get_battle_question()

                }
            }else if (data.data_type ==='battle_question') {
                lobby_question=data.lobby_question
                question_type=data.question_type
                console.log("JSON question")
                document.getElementById("question").innerHTML = data.data_html
                startTimerOnQuestionDiv(9);
                setTimeout(function (){
                    if (data.question_type===1){
                        submitForm(lobby_question.Cor_answ)
                    }
                    else{
                        submitForm_type2(lobby_question.Cor_answ)
                    }


                },10000)

            }else if ((data.data_type==='point_refresh_battle')){
                console.log("JSON point_refresh_battle")
                host_point=data.host_point;
                opponent_point=data.opponent_point
                /*
                document.getElementById("playerpt").innerHTML=host_point;
                document.getElementById("enemypt").innerHTML=opponent_point;
                */

                updatePoints(host_point, opponent_point);

                if(player1_name===host_name && haboru_kerdes<5){
                    haboru_kerdes++
                    get_battle_question()

                }else if(player1_name===host_name && haboru_kerdes>=5){
                    setTimeout(function (){
                            socket.emit("get_score", {
                            lobby_id:lobby_id,
                            player:player1_name
                            })
                        }, 2000)


                }
            }

        });


        function get_battle_question(){

            setTimeout(function (){
                            socket.emit("get_battle_question_event",{
                                lobby_id: lobby_id,
                                player: player1_name,
                                question_type: question_type,
                            })
                        }, 2000)

        }

        function submitForm_type2(correct_answer_value) {
            document.getElementById('question_type_2_button').disabled=true;
            let question_id=document.getElementById("question_id").value;
            let numberInput = document.getElementById("answ");
            let numberValue = parseInt(numberInput.value);
            if (ans_time===""){
                ans_time=new Date().toLocaleTimeString()
            }

            let data={
                    question_type:question_type,
                    lobby_name:lobby_name,
                    lobby_id:lobby_id,
                    player:player1_name,
                    question_id:question_id,
                    numberValue:numberValue,
                    correct_answer_value:correct_answer_value,
                    answer:numberValue===correct_answer_value,
                    distance:correct_answer_value-numberValue,
                    ans_time:ans_time
                }
            setTimeout(clear_question_div, 2000);
            console.log("answ data tip ",data)

            if (battle===false){
                socket.emit("answers",data)
                ans_time=""
            }else{
                socket.emit("battle_answers",data)
                ans_time=""
            }



        }


        function submitForm(correct_answer_value) {
            var radios=null;
            var selectedValue=null;
            var question_id=document.getElementById("question_id").value;
            radios = document.getElementsByName("example");

            for (var i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    selectedValue = radios[i].value;
                    break;
                }
            }
            var data={
                    question_type:question_type,
                    lobby_name:lobby_name,
                    lobby_id:lobby_id,
                    player:player1_name,
                    question_id:question_id,
                    answer:selectedValue==correct_answer_value,
                    distance:0
                }
            visibleAnswers(correct_answer_value,selectedValue)
            setTimeout(clear_question_div, 2000);
            console.log(data)
            socket.emit("answers",data)
        }


        function visibleAnswers(correct_answer_value,selectedValue) {
            const correctLabel = document.querySelector('label[for="option' + correct_answer_value + '"]');

            if (selectedValue === null){
                correctLabel.style.border = '5px solid #FBD87D';
                return;
            }

            const selectedLabel = document.querySelector('label[for="option' + selectedValue + '"]');

            if (selectedValue == correct_answer_value) {
                selectedLabel.style.border = '5px solid #FBD87D';

            } else {
                selectedLabel.style.backgroundColor = 'grey';
                selectedLabel.style.backgroundImage = 'repeating-linear-gradient(20deg, transparent, transparent 5px, #3E3F46 5px, #3E3F46 10px)';
                selectedLabel.style.transform = 'rotate(-2deg)';

                correctLabel.style.border = '5px solid #FBD87D';
            }

        }

        function radio_select(selectedValue){
            console.log(new Date().toLocaleTimeString());
            console.log(selectedValue);
        }

        function tip_answ(){
            document.getElementById('question_type_2_button').disabled=true;
            ans_time=new Date().toLocaleTimeString()

        }


        // függvény, ami megváltoztatja a round-status elemnek a tartalmát, hogy kinek a köre van
        function show_whos_round(player) {
            var string_to_display = "";
            if (player.length != 0) {
                string_to_display = "Jelenleg " + player + " köre van!";
            }
            document.getElementById("round-status").innerHTML = string_to_display;
        }

        /*
         * Terület és player statusbár kijelölése
         * @param {string} player - a játékos neve
         * @param {string} color - a játékos színe
        */
        const areaHighlight = (player, color) => {
            console.log("#### areaHighlight ####");
            console.log("Player: " + player);
            console.log("Color: " + color);
            console.log("#### areaHighlight ####");

            changeCurrentPlayerData(player, color);

            const areas = get_selectable_area(player);
            const leftStatusBar = document.getElementById("left-status-bar");
            const rightStatusBar = document.getElementById("right-status-bar");
            const leftProfPicDiv = leftStatusBar.children[0].children[0];
            const rightProfPicDiv = rightStatusBar.children[0].children[0];

            areas.forEach(area => {
                const areaElement = document.getElementById(area).children[0];

                if (player === player1_name) {
                    areaElement.style.filter = 
                        `drop-shadow(-2px -2px 0px ${color})` +
                        `drop-shadow(2px -2px 0px ${color})` +
                        `drop-shadow(2px 2px 0px ${color})` +
                        `drop-shadow(-2px 2px 0px ${color})`;

                    areaElement.classList.add("outline-animation");
                    areaElement.style.cursor = "pointer";
                }
            });
            
            if(player === host_name)
                leftStatusBar.classList.add("border-animation");
            else if (player === opponent_name)
                rightStatusBar.classList.add("border-animation");
            
        }

        /*
         * Terület és player statusbár kijelölésének eltávolítása
        */
        const areaHighlightRemove = () => {
            removeCurrentPlayerData();

            const leftStatusBar = document.getElementById("left-status-bar");
            const rightStatusBar = document.getElementById("right-status-bar");

            const areas = document.querySelectorAll('.testcases');
            console.log(areas);

            areas.forEach(area => {
                if(area !== undefined && area !== null)
                    area.children[0].style.filter = "none";
                    area.children[0].classList.remove("outline-animation");

                    if(area.children[0].style.cursor === "pointer")
                        area.children[0].style.cursor = "default";
            });
            leftStatusBar.classList.remove("border-animation");
            rightStatusBar.classList.remove("border-animation");
        }

        /*
         * Status div megjenítése és az üzenet módosítása, hogy ki választhat területet
         * @param {string} player - a játékos neve
        */
        const changeCurrentPlayerData = (player, color) => {
            const playerStatus = document.querySelector('#current-player-status');
            const playerStatusText = playerStatus.children[0];

            playerStatus.style.borderColor = color;
            playerStatus.classList.add('visibility-change-animation');
            
            if(can_select === player1_name)
                playerStatusText.innerHTML = "Te választhatsz területet";
            else
                playerStatusText.innerHTML = "Az ellenfeled választhat területet";

        }

        /*
         * Status div eltávolítása
        */
        const removeCurrentPlayerData = () => {
            const playerStatus = document.querySelector('#current-player-status');
            const playerStatusText = playerStatus.children[0];

            playerStatus.classList.remove('visibility-change-animation');

            playerStatusText.innerHTML = "";
        }

        /*
         * Időzítő elindítása a kérdés megjelenítésekor
         * @param {number} time - a visszaszámlálás ideje
        */
        const startTimerOnQuestionDiv = (time) => {
            console.log("#### startTimerOnQuestionDiv ####");
            console.log("Time: " + time);
            console.log("#### startTimerOnQuestionDiv ####");

            let date = new Date();
            date.setMinutes(0);
            date.setSeconds(time);

            const timerElement = document.getElementById("countdown-timer");

            const updateCountdown = () => {
                if (date.getSeconds() > 0) {
                    date.setSeconds(date.getSeconds() - 1);

                    if(date.getSeconds() <= 3) {
                        timerElement.style.color = "red";
                    }
                    if(date.getSeconds() == 3) {
                        //todo: ide kéne rakni valami hangeffektet :D
                        playCountdownSoundEffect();
                    }
                    timerElement.innerHTML = date.toISOString().substr(14, 5);
                } else {
                    clearInterval(countdown);
                }
            }

            const countdown = setInterval(updateCountdown, 1000);
        }

        /*
         * OnChange esemény a válaszokra a színváltáshoz
        */
        const changeColor = () => {
            const answerElement = document.querySelectorAll(".ans-radio");
            const answerElementLabel = document.querySelectorAll(".ans-label");

            for(let i = 0; i < answerElement.length; i++) {
                if(answerElement[i].checked) {
                    if(player1_name === host_name) {
                        answerElementLabel[i].style.backgroundColor = "#4A53A7";
                    } else if(player1_name === opponent_name) {
                        answerElementLabel[i].style.backgroundColor = "#da251c";
                    }
                } else {
                    answerElementLabel[i].style.backgroundColor = "#313239";
                }
            }
        }

        /*
         * Pontok frissítése
         * @param {number} hostPoint - a host pontja
         * @param {number} enemyPoint - az ellenfél pontja
         */
        const updatePoints = (hostPoint, enemyPoint) => {
            const hostPointElement = document.getElementById("playerpt");
            const opponentPointElement = document.getElementById("enemypt");

            if(hostPoint != hostPointElement.innerHTML) {
                hostPointElement.innerHTML = hostPoint;

                hostPointElement.classList.add("point-change-animation");
                setTimeout(() => {
                    hostPointElement.classList.remove("point-change-animation");
                }, 1000);
            }

            if(enemyPoint != opponentPointElement.innerHTML) {
                opponentPointElement.innerHTML = enemyPoint;
                opponentPointElement.classList.add("point-change-animation");

                setTimeout(() => {
                    opponentPointElement.classList.remove("point-change-animation");
                }, 1000);
            }
        }
        
        function area_select(button){

            const selectable_area = get_selectable_area(player1_name);


            console.log("##############")
            console.log(selectable_area)
            console.log(host_area.some(item => neighbors[button.id].includes(item)))
            console.log("##############")

            // ha csak az egyik találta el
            if (can_select===player1_name && helper2===false){
                console.log(" -- Start of log: can_select===player1_name && helper2===false");
                console.log("button.id = " + button.id)
                console.log("player1_name = " + player1_name)
                console.log("host_name = " + host_name)
                console.log("opponent_name = " + opponent_name)
                console.log("host_area = " + host_area)
                console.log("opponent_area = " + opponent_area)
                console.log(" -- End of log: can_select===player1_name && helper2===false")

                // ha az aki választ az a host és a választott szomszédos a birtokolt területeivel
                // és még senki se birtokolja
                if (player1_name === host_name && selectable_area.includes(button.id)) {

                    can_select=''

                    socket.emit("collect_area_event", {
                        lobby_id:lobby_id,
                        button_id:button.id,
                        player:player1_name
                    });
                    player1_pt++;

                // ha az aki választ az az opponent és a választott szomszédos a birtokolt területeivel
                // és még senki se birtokolja
                } else if (player1_name === opponent_name && selectable_area.includes(button.id)) {
                    can_select=''

                    socket.emit("collect_area_event", {
                        lobby_id:lobby_id,
                        button_id:button.id,
                        player:player1_name
                    });
                    player1_pt++;
                } else {
                    console.log(" -- Start of log: mező választás")
                    console.log("host_area = " + host_area)
                    console.log("opponent_area = " + opponent_area)
                    console.log(" -- End of log: mező választás")
                }


            // ha mindketten eltalálták
            } else if (can_select===player1_name && helper2===true) {
                console.log(" -- Start of log: can_select===player1_name && helper2===true");
                console.log("button.id = " + button.id)
                console.log("player1_name = " + player1_name)
                console.log("host_name = " + host_name)
                console.log("opponent_name = " + opponent_name)
                console.log("host_area = " + host_area)
                console.log("opponent_area = " + opponent_area)
                console.log(" -- End of log: can_select===player1_name && helper2===true")

                if (player1_name === host_name && selectable_area.includes(button.id)) {
                    can_select=''

                    socket.emit("collect_area_event_for_new_select",{
                        lobby_id:lobby_id,
                        button_id:button.id,
                        player:player1_name
                    });
                // ha az aki választ az az opponent és a választott szomszédos a birtokolt területeivel
                } else if (player1_name === opponent_name && selectable_area.includes(button.id)) {

                    can_select=''

                    socket.emit("collect_area_event_for_new_select",{
                        lobby_id:lobby_id,
                        button_id:button.id,
                        player:player1_name
                    });
                } else {
                    console.log(" -- Start of log: mező választás")
                    console.log("host_area = " + host_area)
                    console.log("opponent_area = " + opponent_area)
                    console.log(" -- End of log: mező választás")
                }


            }

            else{
                console.log("NEM LEHET XD")
            }

        }


        // returns a list of id with all the selectable areas
        // param player_name: waits player1_name
        function get_selectable_area(player_name) {
            let ret = [];

            if (player_name == opponent_name) {

                for (let node of opponent_area) {
                    for (let neighbor of neighbors[node]) {
                        if (!opponent_area.includes(neighbor) && !host_area.includes(neighbor) && !ret.includes(neighbor) && !university_area.includes(neighbor)) {
                            ret.push(neighbor);
                        }
                    }
                }

            } else if (player_name == host_name) {

                for (let node of host_area) {
                    for (let neighbor of neighbors[node]) {
                        if (!opponent_area.includes(neighbor) && !host_area.includes(neighbor) && !ret.includes(neighbor) && !university_area.includes(neighbor)) {
                            ret.push(neighbor);
                        }
                    }
                }

            } else {
                console.log('Something terrible happened thats for sure pls look after')
            }

            // ha nincs szomszédos foglalható terület, akkor bármely szabad terület foglalható, nem kell szomszéd legyen
            if (ret.length == 0) {
                const all_nodes = Object.keys(neighbors);
                ret = all_nodes.filter(fn => !opponent_area.includes(fn) && !host_area.includes(fn) && !university_area.includes(fn));
            }

            return ret;
        }


        function clear_question_div() {
            document.getElementById("question").innerHTML = "";
        }

        function set_question_div(data) {
            document.getElementById("question").innerHTML = data;
        }


        function correcting_data_for_result() {
            if (player1_name === host_name) {

                return {
                    name: host_name,
                    id: host_name_id,
                    enemy: opponent_name,
                    lobby: lobby_name,
                    lobby_id:lobby_id,
                    pt1:host_point,
                    pt2:opponent_point,
                    kar:player_side
                };
            } else {
                return {
                    name: opponent_name,
                    id: opponent_name_id,
                    enemy: host_name,
                    lobby: lobby_name,
                    lobby_id:lobby_id,
                    pt1:opponent_point,
                    pt2:host_point,
                    kar:player_side
                }
            }

        }

        function request_score() {
            fetch("http://134.122.79.248:6969/result", {
                method: "POST",
                body: JSON.stringify(correcting_data_for_result()),
                headers: {
                    "Content-Type": "application/json"
                }
            })
                .then(response => response.text())
                .then(data => {
                    document.getElementById("result").innerHTML=data;
                }).catch(error => console.error(error));
        }


        const showButtonId= (button) => {
            if (lastclicked !==player1_name && document.getElementById(button.id).style.cursor !== "not-allowed"){
                socket.emit("map_event",{buttonid:button.id,click_user:player1_name,lobby:lobby_id});
            }else{
                console.log("NEM LEHET")

            }
        };


        function setGamePhaseImg(){
            const gamePhase = document.getElementById("game-phase");
            const leftSideBar = document.getElementById("left-status-bar");
            const rightSideBar = document.getElementById("right-status-bar");

            if(battle)
                gamePhase.src = "../static/battle.png";
            else
                gamePhase.src = '../static/territory.png';

            leftSideBar.style.animation = "3s forwards Start-float-left";
            rightSideBar.style.animation = "3s forwards Start-float-right";

            gamePhase.classList.add("slideAnim");
            gamePhase.parentElement.classList.add("game-phaseDivShow");

            setTimeout(() => {
                gamePhase.classList.remove("slideAnim");
                gamePhase.parentElement.classList.remove("game-phaseDivShow");

                leftSideBar.style.animation = "";
                rightSideBar.style.animation = "";
            }, 3000);
        }

        window.onload = () => setGamePhaseImg();


        function surrender(){
            console.log(player1_name);
            player1_pt=0;
            socket.emit("surr",{
                player:player1_name,
                lobby:lobby_id
            })
        }

        function playCountdownSoundEffect() {
            console.log('### playCountdownSoundEffect ###')
            countdownSound.muted = false;
            countdownSound.volume = 0.3;
            countdownSound.play();
            countdownSound.addEventListener('ended', function () {
                countdownSound.muted = true;
            });
        }

        function playHaboruSoundEffect() {
            console.log('### playHaboruSoundEffect ###')
            haboruSound.muted = false;
            haboruSound.volume = 0.5;
            haboruSound.play();
            haboruSound.addEventListener('ended', function () {
                haboruSound.muted = true;
            });
        }


    </script>
</head>
<body>

<img src="../static/BG_img.png" id="background-img">

<div id="game-area">

    <div id="current-player-status">
        <p id="status-content">None</p>
    </div>
   <!--PLAYER 1-->
    <div id="left-status-bar" class="player-bars">
        <img src="../static/ttik_left.png" alt="profile image" class="karImg" id="leftProgImg">
        <div class="game_data_splited playerCardName">

            <div id="left-score" class="score">
                <img src="../static/leftSideFlag.png">
                <span id="playerpt">0</span>
            </div>
            <img src="{{ session['host_imege'] }}" alt="profile image" class="profile-img" id="profileImg1">
            <h2>{{ session['host_name'] }}</h2>
        </div>
    </div>
   <!--PLAYER 1 END-->

   <!--PHASE-->
    <div class="game_data_splited game-phaseDiv" >
       {# <h2>Lobby: {{ session['lobby_name'] }}</h2>#}
        <img id="game-phase" alt="game-phase" src="" />
        <p id="round-status"></p>
    </div>
    <!--PHASE END-->

    <!--PLAYER 2-->
    <div id="right-status-bar" class="player-bars">
        <img src="../static/btk_right.png" alt="profile image" class="karImg" id="rightProgImg">
        <div class="game_data_splited playerCardName">

            <div id="right-score" class="score">
                <img src="../static/rightSideFlag.png">
                <span id="enemypt">0</span>
            </div>
            <img src="{{ session['opponent_image'] }}" alt="profile image" class="profile-img" id="profileImg2">
            <h2>{{ session['opponent_name'] }}
            </h2>

        </div>
    </div>
    <!--PLAYER 2 END-->
    <div class="map">
        <svg viewBox="0 0 1392 1175" version="1.1" xmlns="http://www.w3.org/2000/svg"
             style="enable-background:new 0 0 1392 1175;">
            <g transform="matrix(1,0,0,1,-211.983,-12.0277)">
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="1" class='testcases' onclick="area_select(this)" >
                    <path d="M1102.33,808.847L1148.03,768.282L1172.04,785.434C1172.04,785.434 1137.4,853.764 1137.4,853.764C1137.27,854.024 1137.2,854.309 1137.18,854.6L1132.92,938.855C1132.92,938.855 1117.26,950.164 1117.26,950.164L1092.97,944.422L1059.78,846.722L1102.33,808.847Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="2" class='testcases' onclick="area_select(this)">
                    <path d="M1121.9,785.905L1026.42,729.404L1024.87,725.94L1067.86,657.666L1072.03,659.925C1073.01,660.457 1074.24,660.119 1074.81,659.159L1087.85,637.268C1087.85,637.268 1107.02,639.501 1107.02,639.501C1107.02,639.501 1114.92,646.612 1114.92,646.612L1110.89,664.095C1110.69,664.947 1111.05,665.831 1111.78,666.308L1121.38,672.57L1116.25,685.843C1115.84,686.897 1116.35,688.083 1117.39,688.518L1138.32,697.239C1138.32,697.239 1129.74,714.4 1129.74,714.4C1129.28,715.319 1129.56,716.436 1130.39,717.031L1158.68,737.105C1158.68,737.105 1146.17,764.354 1146.17,764.354L1121.9,785.905Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="3" class='testcases'onclick="area_select(this)">
                    <path d="M1020.52,726.4C1020.55,726.477 1020.57,726.552 1020.61,726.626L1022.88,731.712C1023.06,732.105 1023.36,732.434 1023.73,732.653L1118.62,788.81L1088.98,815.129L1061.57,800.143L1064.67,795.319C1064.99,794.823 1065.09,794.216 1064.93,793.648C1064.78,793.08 1064.39,792.603 1063.87,792.336L1018.59,769.275C1017.63,768.788 1016.46,769.108 1015.88,770.014L954.769,866.101C954.769,866.101 948.047,861.3 948.047,861.3C948.047,861.3 980.135,806.426 980.135,806.426C980.637,805.567 980.462,804.473 979.717,803.814L968.495,793.887L987.235,758.693L1019.6,723.463L1020.52,726.4Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="4" class='testcases'onclick="area_select(this)">
                    <path d="M598.646,436.384L616.289,460.189L623.874,475.39L613.59,476.511C613.59,476.511 598.587,455.716 598.587,455.716C598.33,455.36 597.967,455.094 597.55,454.956L558.942,442.204C558.781,442.151 558.614,442.117 558.445,442.104L533.157,440.189C532.566,440.144 531.985,440.353 531.557,440.763C531.13,441.173 530.897,441.746 530.918,442.338L532.491,488.133L435.394,482.314L449.216,449C449.515,448.278 449.385,447.449 448.879,446.853C448.373,446.257 447.575,445.995 446.814,446.174L442.764,447.127L442.093,429.349C442.057,428.402 441.388,427.599 440.463,427.393L421.24,423.122L415.49,367.059C415.49,367.059 432.505,366.451 432.505,366.451C432.505,366.451 432.181,378.411 432.181,378.411C432.166,378.982 432.386,379.534 432.789,379.938C433.192,380.343 433.744,380.564 434.315,380.55L450.024,380.167C450.629,380.152 451.198,379.875 451.582,379.408C451.966,378.941 452.129,378.33 452.027,377.733L449.345,362.024C449.295,361.731 449.183,361.453 449.017,361.207L422.899,322.583L430.659,316.486L458.472,343.933C458.842,344.298 459.336,344.512 459.855,344.532L477.776,345.221C477.776,345.221 477.776,350.113 477.776,350.113C477.776,351.256 478.697,352.186 479.84,352.197L519.116,352.564C519.116,352.564 530.303,414.09 530.303,414.09C530.458,414.945 531.127,415.613 531.982,415.768L559.363,420.712L598.646,436.384Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="5" class='testcases'onclick="area_select(this)">
                    <path d="M1000.32,432.031L984.358,408.792L1036.19,277.085L1045.83,279.976C1045.83,279.976 1041.19,301.916 1041.19,301.916L1027.85,307.25C1027.18,307.518 1026.7,308.114 1026.57,308.825L1023.22,327.983C1023.11,328.629 1023.31,329.291 1023.75,329.769C1024.2,330.247 1024.85,330.485 1025.5,330.413L1040.39,328.759L1039.49,379.235C1039.49,379.235 1034.28,384.845 1034.28,384.845L1017.27,387.874C1016.53,388.005 1015.93,388.519 1015.67,389.222L1000.32,432.031Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="6" class='testcases'onclick="area_select(this)">
                    <path d="M1043.76,531.165L1038.28,529.906L1028.83,489.965C1028.8,489.819 1028.75,489.677 1028.68,489.542L1003.16,436.448L1019.19,391.764C1019.19,391.765 1034.7,389.003 1034.7,389.003L1052.62,405.087C1053.09,405.512 1053.73,405.698 1054.36,405.591C1054.99,405.483 1055.53,405.096 1055.84,404.538L1066.39,385.261L1079.47,382.487L1092.28,419.073C1092.57,419.922 1093.38,420.484 1094.28,420.467L1119.2,420.006L1128.62,430.326C1129.12,430.874 1129.88,431.114 1130.6,430.957L1148.32,427.126C1149.23,426.93 1149.9,426.157 1149.96,425.231L1151.25,406.396C1151.25,406.396 1160.45,407.711 1160.45,407.711L1154.52,465.197L1133.65,481.894C1133.56,481.969 1133.47,482.052 1133.39,482.142L1083.16,538.973C1083.16,538.973 1043.76,531.165 1043.76,531.165Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="7" class='testcases'onclick="area_select(this)">
                    <path d="M769.44,707.951L739.683,728.424L701.347,714.364L667.506,698.603L663.067,663.534L685.482,655.016C686.259,654.721 686.787,653.99 686.823,653.159L687.781,631.128C687.786,631.011 687.781,630.894 687.767,630.779L686.074,617.24C686.074,617.24 696.756,614.293 696.756,614.293C696.756,614.293 718.915,648.455 718.915,648.455C719.477,649.322 720.591,649.646 721.531,649.215L765.472,629.075C765.472,629.075 774.59,653.535 774.59,653.535L752.362,664.283C751.351,664.772 750.909,665.973 751.363,667L769.44,707.951Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="8" class='testcases'onclick="area_select(this)">
                    <path d="M702.164,719.102L739.259,732.707C739.893,732.939 740.601,732.85 741.157,732.467L773.04,710.532L778.917,708.128L782.643,727.099C782.778,727.785 783.247,728.357 783.893,728.623L814.443,741.225L826.975,748.041L801.929,777.687C801.392,778.324 801.285,779.219 801.657,779.964L812.711,802.071C812.711,802.071 805.82,817.474 805.82,817.474C805.82,817.474 781.856,806.823 781.856,806.823C781.502,806.666 781.112,806.61 780.729,806.662L772.078,807.842L761.967,763.719C761.824,763.096 761.403,762.573 760.825,762.3C760.247,762.028 759.576,762.035 759.005,762.321L741.939,770.854L724.707,775.714L710.217,759.389C710.021,759.168 709.781,758.992 709.512,758.871L696.176,752.89L702.164,719.102Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="9" class='testcases'onclick="area_select(this)">
                    <path d="M830.372,398.764L771.127,486.91C771.127,486.91 751.882,486.969 751.882,486.969L619.284,457.232L601.928,433.815L598.184,413.693C598.144,413.474 598.068,413.263 597.96,413.067L560.009,344.281C560.009,344.281 562.739,330.175 562.739,330.175C562.838,329.666 562.743,329.14 562.474,328.697L548.252,305.299C548.252,305.299 555.335,292.383 555.335,292.383L569.283,289.922L633.188,387.437C633.523,387.947 634.063,388.285 634.668,388.362C635.273,388.438 635.881,388.247 636.332,387.836L651.491,374.056C651.491,374.056 699.562,376.777 699.562,376.777L700.294,386.654L676.904,401.788C676.403,402.112 676.065,402.636 675.976,403.227C675.887,403.818 676.056,404.418 676.44,404.876L688.893,419.723C689.263,420.164 689.798,420.432 690.373,420.464C690.948,420.496 691.51,420.289 691.926,419.892L761.985,353.103C761.985,353.103 772.578,368.782 772.578,368.782C772.788,369.093 773.078,369.341 773.418,369.501L789.702,377.164C790.04,377.323 790.415,377.388 790.786,377.353L800.053,376.47L830.372,398.764Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="10" class='testcases'onclick="area_select(this)">
                    <path d="M772.246,491.073C772.361,491.073 772.476,491.063 772.59,491.044L791.252,487.855L805.071,493.174C805.071,493.174 773.391,554.41 773.391,554.41C773.306,554.575 773.244,554.75 773.205,554.93L765.694,589.92L726.521,566.507C726.174,566.3 725.775,566.198 725.372,566.213L713.222,566.68L693.799,561.712L691.419,557.348L685.994,543.786C685.994,543.786 691.518,526.296 691.518,526.296C691.851,525.24 691.3,524.107 690.263,523.718L645.035,506.758L621.971,462.104L751.198,491.086C751.35,491.12 751.505,491.137 751.66,491.136L772.246,491.073Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="11" class='testcases'onclick="area_select(this)">
                    <path d="M808.869,494.899L828.086,505.192L865.59,534.427L849.011,563.513C848.901,563.706 848.822,563.915 848.778,564.133L841.728,599.077C841.691,599.262 841.679,599.452 841.693,599.64L842.839,615.405L814.183,638.31L805.165,641.084C805.109,641.101 805.054,641.121 804.999,641.143L778.41,651.854C778.41,651.854 768.73,625.887 768.73,625.887L769.201,593.436L777.22,556.077L808.869,494.899Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="12" class='testcases'onclick="area_select(this)">
                    <path d="M866.919,355.187L872.996,370.297L871.121,392.794C871.089,393.182 871.166,393.571 871.343,393.918L894.333,438.747C894.704,439.471 895.463,439.913 896.276,439.878L946.642,437.704C946.642,437.704 940.163,460.21 940.163,460.21C940.115,460.378 940.088,460.552 940.083,460.727L938.611,512.382L907.644,510.662C907.385,510.648 907.127,510.682 906.881,510.762L890.941,515.973C890.753,516.034 890.575,516.122 890.412,516.234L868.373,531.313L830.507,501.797C830.414,501.724 830.315,501.659 830.21,501.603L808.973,490.229C808.897,490.188 808.819,490.152 808.738,490.121L792.214,483.76C791.864,483.626 791.485,483.588 791.115,483.651L776.68,486.118C776.68,486.118 834.925,399.46 834.925,399.46L866.919,355.187Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="13" class='testcases'onclick="area_select(this)">
                    <path d="M948.667,433.446L897.431,435.658L875.323,392.546L877.189,370.151C877.216,369.827 877.167,369.502 877.046,369.2L869.804,351.194L922.449,278.346C922.449,278.346 945.064,290.294 945.064,290.294L944.166,310.048C944.136,310.699 944.413,311.327 944.915,311.744C945.416,312.161 946.084,312.319 946.719,312.171L981.683,304.029C982.124,303.926 982.52,303.682 982.811,303.334L1006.31,275.133L1019.46,272.066L1032.18,275.883C1032.18,275.883 980.276,407.787 980.276,407.787L948.667,433.446Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="14" class='testcases'onclick="area_select(this)">
                    <path d="M926.186,594.068L944.465,603.067C944.465,603.067 944.465,607.135 944.465,607.135C944.465,607.647 944.654,608.141 944.995,608.523L961.088,626.532C961.23,626.691 961.396,626.827 961.579,626.936L970.034,631.946C970.034,631.946 962.824,642.762 962.824,642.762C962.398,643.401 962.358,644.221 962.719,644.898L965.784,650.646C965.862,650.792 965.957,650.928 966.067,651.051L1009.53,699.853L1018.04,718.997L985.173,754.778L902.57,701.645C904.382,695.755 905.941,689.838 907.246,683.914C910.779,667.87 917.598,645.858 919.577,627.067C920.865,614.843 923.122,603.533 926.186,594.068Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="15" class='testcases'onclick="area_select(this)">
                    <path d="M1032.2,562.039L1034.26,571.149C1034.39,571.755 1034.79,572.268 1035.35,572.548L1074.14,592.185C1074.45,592.339 1074.78,592.416 1075.12,592.409L1099.83,591.943L1117.14,604.058L1106.17,635.206L1087,632.973C1086.18,632.878 1085.39,633.271 1084.96,633.976L1072.26,655.308C1072.26,655.308 1068.13,653.073 1068.13,653.073C1067.16,652.55 1065.96,652.866 1065.38,653.795L1023.14,720.857L1022.49,718.774C1022.46,718.699 1022.43,718.626 1022.4,718.554L1013.21,697.864C1013.12,697.667 1013,697.485 1012.86,697.324L969.343,648.466L966.982,644.037C966.982,644.037 974.72,632.429 974.72,632.429C975.037,631.954 975.145,631.369 975.018,630.811C974.891,630.254 974.54,629.773 974.049,629.482L963.98,623.515L948.632,606.34L948.632,601.771C948.632,600.977 948.181,600.252 947.469,599.902L927.558,590.099C928.547,587.421 929.607,584.922 930.733,582.626C933.78,576.416 937.119,571.757 941.103,569.765C960.089,560.272 1007.92,556.654 1022.53,559.575C1024.57,559.982 1027.91,560.852 1032.2,562.039Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="16" class='testcases'onclick="area_select(this)">
                    <path d="M1041.54,551.716L1044.93,535.646L1083.53,543.293C1084.26,543.437 1085,543.184 1085.5,542.629L1135.26,486.32L1154.8,500.532C1155.56,501.083 1156.59,501.061 1157.32,500.479L1191.22,473.547L1218.6,488.018C1206.83,502.454 1195.06,513.517 1181.67,527.698C1169.86,540.196 1161.1,552.965 1152.99,562.436C1148.37,567.838 1144.11,572.135 1139.36,574.115C1138.29,574.563 1136.49,574.449 1134.18,574.313C1129.08,574.013 1122.21,572.84 1114.39,571.175C1091.52,566.301 1060.94,557.237 1041.54,551.716Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="17" class='testcases'onclick="area_select(this)" >
                    <path d="M902.408,651.401L871.389,642.046L859.985,633.566L847.032,615.608L845.869,599.622L852.797,565.286L869.865,535.341L892.519,519.841L907.803,514.844L940.145,516.641L962.736,526.45L967.648,531.362L974.033,548.814C958.959,550.874 944.376,554.153 935.513,558.584C929.607,561.537 924.027,567.916 919.511,577.121C913.582,589.207 909.183,606.419 907.146,625.758C906.283,633.947 904.464,642.76 902.408,651.401Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="18" class='testcases'onclick="area_select(this)">
                    <path d="M978.27,548.268C975.959,541.952 971.403,529.498 971.403,529.498C971.299,529.214 971.134,528.955 970.919,528.741L965.402,523.224C965.217,523.039 964.999,522.89 964.759,522.786L942.755,513.232C942.755,513.232 944.24,461.109 944.24,461.109L951.266,436.703L981.575,412.1L999.1,437.612L1024.83,491.143L1034.52,532.125C1034.7,532.897 1035.31,533.498 1036.08,533.676L1040.86,534.774L1037.52,550.579C1031.84,548.985 1027.45,547.812 1024.98,547.317C1016.38,545.599 997.326,545.96 978.27,548.268Z"/>
                </g>
                <g transform="matrix(1.73247,0,0,1.73247,-507.842,-459.319)" id="19" class='testcases' onclick="area_select(this)">
                    <path d="M884.395,715.513C880.065,713.286 873.921,710.127 873.921,710.127C873.137,709.724 872.186,709.857 871.543,710.459L864.244,717.302L849.877,721.473C849.482,721.588 849.131,721.816 848.866,722.129L829.721,744.791L816.336,737.512C816.27,737.476 816.203,737.444 816.135,737.416L786.516,725.198L782.517,704.839C782.397,704.228 782.01,703.702 781.461,703.407C780.913,703.111 780.261,703.077 779.684,703.312L773.131,705.993L755.987,667.158L778.048,656.491L806.474,645.041L815.787,642.177C816.037,642.1 816.271,641.976 816.475,641.813L844.588,619.342L856.794,636.265C856.919,636.438 857.07,636.591 857.241,636.718L869.195,645.607C869.389,645.751 869.606,645.86 869.837,645.93L901.425,655.457C899.138,664.731 896.705,673.657 895.038,681.226C892.503,692.74 888.949,704.222 884.395,715.513Z"/>
                </g>
            </g>
        </svg>
    </div>

    <div id="main_box" style="bottom: 0; left: 50%; z-index: 10; position: absolute">
        <div id="question"></div>
        <div id="result"></div>
    </div>
    <button type="button" class="btn btn-danger"  onclick="surrender()">Harc feladása</button>
</div>
</body>
</html>

